{
  "hash": "77ff3028b49277a34e51da2da91a8d9a",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"โหลดแผนที่ประเทศไทย\"\ndate: '2024-10-02'\ncategories: [R]\n---\n\n## ดาวน์โหลดแผนที่ประเทศไทยที่ขอบเขตเป็นจังหวัดด้วย `geodata`\n\nโค้ดนี้ใช้สำหรับดาวน์โหลดขอบเขตทางภูมิศาสตร์ของประเทศไทยในระดับ “จังหวัด” (Administrative level 1) จากฐานข้อมูล **GADM (Global Administrative Areas)** ซึ่งมีให้บริการผ่านแพ็กเกจ `geodata`\n\n\n::: {.cell}\n\n```{.r .cell-code}\ninstall.packages(\"geodata\")\nlibrary(geodata)\n# ดาวน์โหลด shapefile ของประเทศไทย ระดับจังหวัด (level = 1)\nthai_prov <- geodata::gadm(country = \"THA\", level = 1, path = \"data\")\n# รหัสประเทศ ISO-3: THA (ประเทศไทย)\n# ระดับการปกครอง: 0=ประเทศ, 1=จังหวัด, 2=อำเภอ ฯลฯ\n# path ที่อยู่โฟลเดอร์สำหรับเก็บไฟล์ .rds หรือ .shp เรียกเก็บที่ โฟลเดอร์  ที่ชื่อ data\n```\n:::\n\n\nเมื่อโหลดแล้ว\n\n\n::: {.cell}\n\n```{.r .cell-code}\nthai_prov <- readRDS(\"D:/GitHub/9March19XX/data/gadm/gadm41_THA_1_pk.rds\")\nclass(thai_prov)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"PackedSpatVector\"\nattr(,\"package\")\n[1] \"terra\"\n```\n\n\n:::\n:::\n\n\nหลังจากรันคำสั่งนี้ จะได้ไฟล์ shapefile หรือไฟล์ `.rds` อยู่ในโฟลเดอร์ `data/`\\\n\noutput ที่ได้มาจะเป็น SpatVector จากแพ็กเกจ `terra` แต่ถ้าอยากใช้กับแพ็กเกจในสาย tidyverse เช่น ggplot2, dplyr, sf จำเป็นต้องแปลงก่อนด้วย `st_as_sf()`\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(terra)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nterra 1.8.60\n```\n\n\n:::\n\n```{.r .cell-code}\nlibrary(sf)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nLinking to GEOS 3.13.1, GDAL 3.11.0, PROJ 9.6.0; sf_use_s2() is TRUE\n```\n\n\n:::\n\n```{.r .cell-code}\nthai_prov <- terra::unwrap(thai_prov)\nthai_prov_sf <- st_as_sf(thai_prov) # แปลงเป็น sf object\nplot(thai_prov_sf[\"NAME_1\"]) # แสดงชื่อจังหวัด\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n\n> *Tip:*\\\n> ถ้าโหลดไม่สำเร็จ (เช่น server ช้า หรือเน็ตไม่เสถียร) ลองใช้ mirror ของ GADM โดยโหลดจากเว็บโดยตรง: [GADM](https://gadm.org/download_country.html){.uri}\n\n## ดาวน์โหลดแผนที่ไทย ไฟล์ GeoJSON\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(sf)\n#โหลดแผนที่ขอบเขตจังหวัด (OpenGISData-Thailand)\nth_prov_geojson <- st_read(\n  \"https://raw.githubusercontent.com/chingchai/OpenGISData-Thailand/master/provinces.geojson\",\n  quiet = TRUE,\n  options = \"ENCODING=UTF-8\"\n) |>\n  st_transform(4326)\n```\n:::\n\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}